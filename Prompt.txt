《数据库应用》课程设计

1.项目背景

一家名为“聚香园”的中餐厅，拥有大厅圆桌和包间。餐厅需要一套系统支持顾客入座后扫码点餐，支持加菜、退菜，并能管理桌台的占用情况。

2.系统角色

- **顾客（Customer）**：扫码绑定桌号进行点餐。
- **服务员（Waiter）**：协助点餐、确认订单、处理退菜。
- **后厨（Chef）**：查看分单（凉菜房/热菜房）。
- **经理（Manager）**：管理菜品和查看营收。

3.角色详细功能要求

- 顾客：
  - 查看空闲桌位（桌位ID，桌台类型，桌台容量，桌台状态）
  - 扫码绑定桌位（即开台，与服务员开台功能相同，只是叫法不一样）
  - 查看菜单（菜品ID，菜品名称，菜品分类，菜品价格）
  - 点菜/加菜（① 选择菜品ID，② 根据具体菜品情况关联若干轮口味选项：如米饭，则无需关联口味；如可乐等饮料，则需要关联1轮口味选项冷读（冰，常温）；水煮肉片则需要关联2轮口味选项，一轮选辣度（微辣，中辣，特辣），一轮选油度（少油，正常油）；每轮都必须选择且只能选择一个选项③选择菜品数量）
  - 查看当前订单明细（包括订单ID，菜品ID，菜品名称，菜品分类，菜品价格，菜品数量）
  - 催菜（顾客可以通过选择订单ID+菜品ID，对已经交给后厨的，并且菜品状态为“未制作”或者“制作中”的菜品进行催菜，催菜后，后厨端口对应的条目需要高亮显示）

- 服务员：
  - 查看全部桌位（桌位ID，桌台类型，桌台容量，桌台状态）
  - 管理桌位状态（可以选择桌台状态为“待清理”的桌台ID，将他们变成“空闲”）
  - 开台（将桌台状态从“空闲”变为“就餐中”，并关联一个新的订单ID）
  - 查看菜单（菜品ID，菜品名称，菜品分类，菜品价格）
  - 协助点菜/加菜（即点菜/加菜，与顾客点菜功能相同，只是叫法不一样）（① 选择菜品ID，② 根据具体菜品情况关联若干轮口味选项：如米饭，则无需关联口味；如可乐等饮料，则需要关联1轮口味选项冷读（冰，常温）；水煮肉片则需要关联2轮口味选项，一轮选辣度（微辣，中辣，特辣），一轮选油度（少油，正常油）；每轮都必须选择且只能选择一个选项③选择菜品数量）
  - 查看当前订单明细（包括订单ID，菜品ID，菜品名称，菜品分类，菜品价格，菜品数量）
  - 确认订单（显示订单明细后如果选择确认订单，则将订单明细上的信息交给后厨，未确认前不会移交给后厨；确认后该桌继续加菜，则会关联生成一个新的菜品订单ID，并且“当前订单明细”内容清空，旧订单内容进入结账汇总的菜品明细表，但是在结账前无法直接查看）
  - 退菜（服务员可以通过选择订单ID+菜品ID，对已经交给后厨的，并且菜品状态为“未制作”或者“制作中”的已点菜品进行退菜，但是必须填写退菜理由）
  - 结账（①创建一个账单ID②清空“当前订单明细”内容③汇总该桌自开台以来所有已经确定的订单ID，和这些进入后厨的菜品明细，并且每个菜品条目前标明菜品对应的订单ID，记得去除退菜的菜品，④汇总账单总额⑤结账后，桌台状态从“就餐中”变为“待清理”⑥结账汇总账单总额后，进入折扣处理，支持选择整单打8折或者抹零二选一⑦折扣处理后给出实际消费额）

- 后厨：
  - 查看所有下单（分单条目内容包括：订单ID，菜品ID，菜品名称，菜品分类，菜品价格，菜品数量，菜品状态）
  - 查看分单（分作凉菜房，热菜房两类：凉菜房包括——凉菜、酒水；热菜房包括——热菜、汤羹、主食）（两类房当中的具体条目内容仍然包括：订单ID，菜品ID，菜品名称，菜品分类，菜品价格，菜品数量，菜品状态）
  - 更新菜品状态（通过输入订单ID和菜品ID后，可以选择修改对应条目的菜品状态）

- 经理：
  - 管理菜品：
    - 查看所有菜品：菜品ID，菜品名称，菜品分类，菜品价格
    - 添加菜品：菜品ID（自动延续获取，无需手动添加），菜品名称，菜品分类，菜品价格，口味选项（关联几轮？第i轮有几个选项？每个选项的内容是什么？）
    - 下架菜品：菜品ID（下架后，对应菜品ID和该菜品相关所有信息和口味关联永久消失）
  - 营收统计：汇总所有账单（包括账单ID、每个账单下所包含的全部订单ID与订单内容明细，每个账单的总额和实际消费额，所有账单的总额之和与实际消费额之和）

4.部分关键词解释

- 开台：顾客扫码绑定桌位或者服务员开台后，将桌台状态从“空闲”变为“就餐中”，并关联一个新的订单ID
- 桌台类型：一共有两类桌台，一类为大厅圆桌每桌限坐6人，一类为包间桌台每桌限坐12人
- 桌台状态：每张桌子有三类状态——空闲、就餐中、待清理（账单结算完成后桌台状态从“就餐中”变为“待清理”）
- 账单和订单：两者不同，每个账单包含若干订单。
- 菜品信息：包括菜品ID，菜品名称，菜品分类（分类分为5类：热菜、凉菜、汤羹、主食、酒水），菜品价格。并且每个具体的菜品条目关联着若干轮口味选项。
- 口味选项：每个菜品所关联的口味选项的轮数数量不定，可以是零，也可以是无数轮。每轮口味选项中的选项数量也不一定，至少是2，可以是无数项。每个具体的选项内容不一定，可以是“冷”“常温”或者是“微辣”“中辣”“特辣”等，视具体菜品而自定义。
- 点菜/加菜次数：开桌后点菜次数无限制，在结账前可以多次点菜（除首次点菜外，后续点菜即视为加菜）。新点的菜品将加入当前订单明细中。
- 菜品状态：包括三类——未制作，制作中，已完成

5.课程设计要求

按照数据库系统规范要求进行数据库建设和应用程序开发。具体要求如下：

1. 根据课题项目的需求陈述进行需求分析，包括功能需求和简单的交互需求，确定哪些要素需要进行持久化存储，形成需求文档。
2. 根据需求文档，利用E/R方法或ODL方法为课题设计概念模式，再经过范式分析，转换成关系模式，形成数据库设计文档。
3. 根据关系模式，在指定的数据库管理系统中完成物理设计，生成所需要的基础表、视图等，并维护好各项约束。
4. 加载项目需求相关的足够数量的符合现实意义的实验数据，以便充分展示所开发的应用程序的各种功能和运行效果。
5. 开发数据库应用程序，形成程序功能文档。根据课题的需求分析文档，应用程序可根据情况酌情完成各项功能。

6.实验环境要求

要求在云平台环境下的DBMS建立数据库；通过某一个熟悉的开发环境来开发可交互的应用程序（目前拟定为在VScode下的控制台的可交互程序）。

- 数据库系统采用开源的云数据库：supabase，https://supabase.com/，自己注册账户使用
- 系统开发语言：Python

温馨提示：如果条件许可，可以开发基于C/S，B/S架构（两层或三层）的数据库应用系统。

7.实验验收

- 学生在数据库应用（课设）评审系统中提交云数据库项目的URL地址和**service_role key**
- 学生在数据库应用（课设）评审系统中完成在线测验
- 学生在文件提交系统中提交实验报告及附件

8.数据库设计与操作要求

1. 课题的需求分析是否充分深入，需求和数据的复杂度是否匹配需求规格？
2. 概念模型、关系模式的设计与实现是否与应用需求相匹配，能否满足应用的功能要求？
3. 关系模式的数量与复杂度如何，表间的联系类型如何？
4. 关系模式转化为基础表后，相关的约束是否正确设置，包括主键、外键、自定义约束等，能否正确的解释？
5. 能支撑应用正常运行的数据是否录入完整，数据的物理意义是否正确？
6. 能否设计并操作执行满足查询要求的SQL语句？
7. 基础表设计时有否满足基本范式的要求？
8. 基础表设计时有否考虑降低范式，增加部分冗余，加快查询速度的设计策略？
9. 基础表设计能否应对未来可能发生的需求变更，基础表设计具有一定的可扩展性？
10. 除基础表外设计是否考虑了外模式的作用？有否设计并使用了外模式？